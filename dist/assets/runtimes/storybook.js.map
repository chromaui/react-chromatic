{"version":3,"sources":["../../../src/assets/runtimes/storybook.js"],"names":["renderSpec","specs","runtime","specRuntime","input","Error","kind","name","story","find","c","stories","s","render","map","componentName","reduce","a","b"],"mappings":";;;;;;;;;;;;;;;QAMgBA,U,GAAAA,U;QAiBAC,K,GAAAA,K;;AArBhB;;;;AAEO,IAAMC,4BAAU,WAAhB,C,CAJP;AACA;AAKO,SAASF,UAAT,OAAqD;AAAA,MAAtBG,WAAsB,QAA/BD,OAA+B;AAAA,MAATE,KAAS,QAATA,KAAS;;AAC1D,MAAID,gBAAgBD,OAApB,EAA6B;AAC3B,UAAM,IAAIG,KAAJ,qCAA4CF,WAA5C,YAAN;AACD;;AAHyD,MAKlDG,IALkD,GAKnCF,KALmC,CAKlDE,IALkD;AAAA,MAK5CC,IAL4C,GAKnCH,KALmC,CAK5CG,IAL4C;;;AAO1D,MAAMC,QAAQ,2BACXC,IADW,CACN;AAAA,WAAKC,EAAEJ,IAAF,KAAWA,IAAhB;AAAA,GADM,EAEXK,OAFW,CAEHF,IAFG,CAEE;AAAA,WAAKG,EAAEL,IAAF,KAAWA,IAAhB;AAAA,GAFF,CAAd;;AAIA,SAAOC,MAAMK,MAAN,CAAa;AAClBP,cADkB;AAElBC;AAFkB,GAAb,CAAP;AAID;;AAEM,SAASN,KAAT,GAAiB;AACtB,SAAO,2BACJa,GADI,CACA;AAAA,QAAGR,IAAH,SAAGA,IAAH;AAAA,QAASK,OAAT,SAASA,OAAT;AAAA,WACHA,QAAQG,GAAR,CAAY;AAAA,UAAGP,IAAH,SAAGA,IAAH;AAAA,aAAe;AACzBA,kBADyB;AAEzBQ,uBAAeT,IAFU;AAGzBJ,wBAHyB;AAIzBE,eAAO,yBAAe;AACpBE,oBADoB;AAEpBC;AAFoB,SAAf;AAJkB,OAAf;AAAA,KAAZ,CADG;AAAA,GADA,EAYJS,MAZI,CAYG,UAACC,CAAD,EAAIC,CAAJ;AAAA,sDAAcD,CAAd,oCAAoBC,CAApB;AAAA,GAZH,EAY2B,EAZ3B,CAAP,CADsB,CAaiB;AACxC;;kBAEc;AACbhB,kBADa;AAEbF,wBAFa;AAGbC;AAHa,C","file":"storybook.js","sourcesContent":["// XXX: Should we make this a peer dependency?\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport { getStorybook } from '@storybook/react';\n\nexport const runtime = 'storybook';\n\nexport function renderSpec({ runtime: specRuntime, input }) {\n  if (specRuntime !== runtime) {\n    throw new Error(`Storybook plugin cannot handle ${specRuntime} specs`);\n  }\n\n  const { kind, name } = input;\n\n  const story = getStorybook()\n    .find(c => c.kind === kind)\n    .stories.find(s => s.name === name);\n\n  return story.render({\n    kind,\n    name,\n  });\n}\n\nexport function specs() {\n  return getStorybook()\n    .map(({ kind, stories }) =>\n      stories.map(({ name }) => ({\n        name,\n        componentName: kind,\n        runtime,\n        input: JSON.stringify({\n          kind,\n          name,\n        }),\n      }))\n    )\n    .reduce((a, b) => [...a, ...b], []); // flatten\n}\n\nexport default {\n  runtime,\n  renderSpec,\n  specs,\n};\n"]}