{"version":3,"sources":["../../../src/assets/runtimes/storybook-common.js"],"names":["storybookRuntimeOptions","getStorybook","runtime","renderSpec","specRuntime","input","Error","kind","name","story","find","c","stories","s","render","specs","map","component","displayName","split","slice","reduce","a","b"],"mappings":";;;;;;;;;;;;;;kBAAwBA,uB;;;;AAAT,SAASA,uBAAT,CAAiCC,YAAjC,EAA+C;AAC5D,MAAMC,UAAU,WAAhB;AACA,SAAO;AACLA,oBADK;AAELC,cAFK,4BAEuC;AAAA,UAAtBC,WAAsB,QAA/BF,OAA+B;AAAA,UAATG,KAAS,QAATA,KAAS;;AAC1C,UAAID,gBAAgBF,OAApB,EAA6B;AAC3B,cAAM,IAAII,KAAJ,qCAA4CF,WAA5C,YAAN;AACD;;AAHyC,UAKlCG,IALkC,GAKnBF,KALmB,CAKlCE,IALkC;AAAA,UAK5BC,IAL4B,GAKnBH,KALmB,CAK5BG,IAL4B;;;AAO1C,UAAMC,QAAQR,eACXS,IADW,CACN;AAAA,eAAKC,EAAEJ,IAAF,KAAWA,IAAhB;AAAA,OADM,EAEXK,OAFW,CAEHF,IAFG,CAEE;AAAA,eAAKG,EAAEL,IAAF,KAAWA,IAAhB;AAAA,OAFF,CAAd;;AAIA,aAAOC,MAAMK,MAAN,CAAa;AAClBP,kBADkB;AAElBE,eAAOD;AAFW,OAAb,CAAP;AAID,KAjBI;AAkBLO,SAlBK,mBAkBG;AACN,aAAOd,eACJe,GADI,CACA;AAAA,YAAGT,IAAH,SAAGA,IAAH;AAAA,YAASK,OAAT,SAASA,OAAT;AAAA,eACHA,QAAQI,GAAR,CAAY;AAAA,cAAGR,IAAH,SAAGA,IAAH;AAAA,iBAAe;AACzBA,sBADyB;AAEzBS,uBAAW;AACTT,oBAAMD,IADG;AAETW,2BAAaX,KAAKY,KAAL,CAAW,GAAX,EAAgBC,KAAhB,CAAsB,CAAC,CAAvB,EAA0B,CAA1B;AAFJ,aAFc;AAMzBlB,4BANyB;AAOzBG,mBAAO,yBAAe;AACpBE,wBADoB;AAEpBC;AAFoB,aAAf;AAPkB,WAAf;AAAA,SAAZ,CADG;AAAA,OADA,EAeJa,MAfI,CAeG,UAACC,CAAD,EAAIC,CAAJ;AAAA,0DAAcD,CAAd,oCAAoBC,CAApB;AAAA,OAfH,EAe2B,EAf3B,CAAP,CADM,CAgBiC;AACxC;AAnCI,GAAP;AAqCD","file":"storybook-common.js","sourcesContent":["export default function storybookRuntimeOptions(getStorybook) {\n  const runtime = 'storybook';\n  return {\n    runtime,\n    renderSpec({ runtime: specRuntime, input }) {\n      if (specRuntime !== runtime) {\n        throw new Error(`Storybook plugin cannot handle ${specRuntime} specs`);\n      }\n\n      const { kind, name } = input;\n\n      const story = getStorybook()\n        .find(c => c.kind === kind)\n        .stories.find(s => s.name === name);\n\n      return story.render({\n        kind,\n        story: name,\n      });\n    },\n    specs() {\n      return getStorybook()\n        .map(({ kind, stories }) =>\n          stories.map(({ name }) => ({\n            name,\n            component: {\n              name: kind,\n              displayName: kind.split('/').slice(-1)[0],\n            },\n            runtime,\n            input: JSON.stringify({\n              kind,\n              name,\n            }),\n          }))\n        )\n        .reduce((a, b) => [...a, ...b], []); // flatten\n    },\n  };\n}\n"]}